<!DOCTYPE html>

<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->

<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->

<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->

<!-- BEGIN HEAD -->

<head>

	<meta charset="utf-8" />

	<title>Home Page</title>

	<meta content="width=device-width, initial-scale=1.0" name="viewport" />

	<meta content="ceph" name="description" />

	<meta content="Ying.Fei" name="author" />

	<!-- BEGIN GLOBAL MANDATORY STYLES -->

	<link href="media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/style-metro.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/style.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/style-responsive.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>

	<link href="media/css/uniform.default.css" rel="stylesheet" type="text/css"/>

	<!-- END GLOBAL MANDATORY STYLES -->

	<!-- BEGIN PAGE LEVEL STYLES -->

	<link href="media/css/error.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/phigow.css" rel="stylesheet" type="text/css"/>

	<!-- END PAGE LEVEL STYLES -->

	<link rel="shortcut icon" href="media/image/favicon.ico" />

</head>

<!-- END HEAD -->

<!-- BEGIN BODY -->

<body class="page-header-fixed page-sidebar-fixed page-sidebar-closed page-footer-fixed">

	<!-- BEGIN HEADER -->

	<div class="header navbar navbar-inverse navbar-fixed-top">

		<!-- BEGIN TOP NAVIGATION BAR -->

		<div class="navbar-inner">

			<div class="container-fluid">

				<!-- BEGIN LOGO -->

				<a class="brand" href="index.html">

				<img src="media/image/logo.png" alt="logo" />

				</a>

				<!-- END LOGO -->

				<!-- BEGIN RESPONSIVE MENU TOGGLER -->

				<a href="javascript:;" class="btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">

				<img src="media/image/menu-toggler.png" alt="" />

				</a>          

				<!-- END RESPONSIVE MENU TOGGLER -->

			</div>

		</div>

		<!-- END TOP NAVIGATION BAR -->

	</div>

	<!-- END HEADER -->

	<!-- BEGIN CONTAINER -->   

	<div class="page-container row-fluid">

		<!-- BEGIN SIDEBAR -->

		<div class="page-sidebar nav-collapse collapse">

			<!-- BEGIN SIDEBAR MENU -->        

			<ul class="page-sidebar-menu">

				<li>

					<!-- BEGIN SIDEBAR TOGGLER BUTTON -->

					<div class="sidebar-toggler hidden-phone"></div>

					<!-- BEGIN SIDEBAR TOGGLER BUTTON -->

				</li>

				<li class="start active">

					<a href="cluster.html">

					<i class="icon-sitemap"></i> 

					<span class="title">集群</span>

					<span class="selected"></span>

					<span class="arrow open"></span>

					</a>

				</li>

				<li class="">

					<a href="server.html">

					<i class="icon-globe"></i> 

					<span class="title">服务器</span>

					</a>

				</li>

				<li class="">

					<a href="disk.html">

					<i class="icon-save"></i> 

					<span class="title">磁盘</span>

					</a>

				</li>

				<li class="">

					<a href="pool.html">

					<i class="icon-cloud"></i> 

					<span class="title">存储池</span>

					</a>

				</li>

				<li class="">

					<a href="image.html">

					<i class="icon-file"></i> 

					<span class="title">镜像</span>

					</a>

				</li>

				<li class="">

					<a href="device.html">

					<i class="icon-tasks"></i> 

					<span class="title">块设备</span>

					</a>

				</li>

				<li class="">

					<a href="share.html">

					<i class="icon-copy"></i> 

					<span class="title">共享存储</span>

					</a>

				</li>

				<li class="">

					<a href="user.html">

					<i class="icon-user"></i> 

					<span class="title">用户</span>

					</a>

				</li>

				<li class="">

					<a href="option.html">

					<i class="icon-cogs"></i> 

					<span class="title">设置</span>

					</a>

				</li>

				<li class="last">

					<a href="about.html">

					<i class="icon-info-sign"></i> 

					<span class="title">帮助</span>

					</a>

				</li>

			</ul>

			</ul>

			<!-- END SIDEBAR MENU -->

		</div>

		<!-- END SIDEBAR -->

		<!-- BEGIN PAGE -->

		<div class="page-content">

			<!-- BEGIN PAGE CONTAINER-->

			<div class="container-fluid">

				<!-- BEGIN PAGE HEADER-->

				<div class="row-fluid">

					<div class="span12">

						<!-- BEGIN PAGE TITLE & BREADCRUMB-->

						<h3 class="page-title">

							集群<small>集群的描述</small>

						</h3>

						<ul class="breadcrumb">

							<li>

								<i class="icon-home"></i>

								<a href="index.html">主页</a> 

								<i class="icon-angle-right"></i>

							</li>

							<li>

								<a href="#">集群</a>

							</li>

						</ul>

						<!-- END PAGE TITLE & BREADCRUMB-->

					</div>

				</div>

				<!-- END PAGE HEADER-->

				<!-- BEGIN PAGE CONTENT-->

				<div class="row-fluid">

					<span class="span1">存储容量： </span>

					<div class="span11">
						
						<div class="progress" id="ceph_size">

							<div class="bar" style="width: 0%;"></div>

							<span> - G / Na G</span>
							
						</div>

					</div>

					<div class="clearfix"></div>

					<div class="span12">

						<!-- SubPage Tiles -->

						<div class="span7">

							<!-- Tiles Row One -->

							<div class="row-fluid">

								<div data-desktop="span4" class="span4 responsive">

									<div class="dashboard-stat light">

										<div class="visual">

											<i id="health_logo"></i>

										</div>

										<div class="details">

											<div class="number" id="health_info">

												健康度

											</div>

											<div class="desc">         

												

											</div>

										</div>

										<a href="cluster.html" class="more">

										健康度 <i class="m-icon-swapright m-icon-black"></i>

										</a>  

									</div>

								</div>

								<div data-desktop="span4" class="span4 responsive">

									<div class="dashboard-stat light">

										<div class="visual">

											<i class="icon-globe"></i>

										</div>

										<div class="details">

											<div class="number" id="server_num">

												N/A

											</div>

											<div class="desc">         

												个服务器

											</div>

										</div>

										<a href="server.html" class="more">

										服务器 <i class="m-icon-swapright m-icon-black"></i>

										</a> 

									</div>

								</div>

								<div data-desktop="span4" class="span4 responsive">

									<div class="dashboard-stat light">

										<div class="visual">

											<i class="icon-save"></i>

										</div>

										<div class="details">

											<div class="number" id="disk_num">

												N/A

											</div>

											<div class="desc">         

												块磁盘

											</div>

										</div>

										<a href="disk.html" class="more">

										磁盘 <i class="m-icon-swapright m-icon-black"></i>

										</a>  

									</div>

								</div>

							</div>

							<div class="clearfix"></div>

							<!-- Tiles Row Two -->

							<div class="row-fluid">

								<div data-desktop="span4" class="span4 responsive">

									<div class="dashboard-stat light">

										<div class="visual">

											<i class="icon-file"></i>

										</div>

										<div class="details">

											<div class="number" id="image_num">

												N/A

											</div>

											<div class="desc">         

												个镜像

											</div>

										</div>

										<a href="image.html" class="more">

										镜像 <i class="m-icon-swapright m-icon-black"></i>

										</a>  

									</div>

								</div>

								<div data-desktop="span4" class="span4 responsive">

									<div class="dashboard-stat light">

										<div class="visual">

											<i class="icon-cloud"></i>

										</div>

										<div class="details">

											<div class="number" id="pool_num">

												N/A

											</div>

											<div class="desc">         

												个存储池

											</div>

										</div>

										<a href="pool.html" class="more">

										存储池 <i class="m-icon-swapright m-icon-black"></i>

										</a>

									</div>

								</div>

								<div data-desktop="span4" class="span4 responsive">

									<div class="dashboard-stat light">

										<div class="visual">

											<i class="icon-tasks"></i>

										</div>

										<div class="details">

											<div class="number" id="device_num">

												N/A

											</div>

											<div class="desc">         

												个块设备

											</div>

										</div>

										<a href="device.html" class="more">

										块设备 <i class="m-icon-swapright m-icon-black"></i>

										</a>                 
									</div>

								</div>

							</div>

							<!-- Status Table -->

							<div class="row-fluid">

								<div class="span12">

									<table class="table table-tile">

										<thead>

											<tr>

												<th style="width:80px">节点\槽位</th>

												<th>01</th>

												<th>02</th>

												<th>03</th>

												<th>04</th>

												<th>05</th>

												<th>06</th>

												<th>07</th>

												<th>08</th>

											</tr>

										</thead>

										<tbody id="osd_tbody">

										</tbody>

									</table>

								</div>

							</div>

						</div>

						<!-- eCharts Graphics -->

						<div class="span5" id="linegraph">

						</div>							

						<div class="clearfix"></div>

						<!-- Log & Oper Status -->

						<div class="row-fluid">

							<!-- Oper Table -->

							<div class="span7">

								<div class="portlet box light-grey">

									<div class="portlet-title">

										<div class="caption"><i class="icon-cogs"></i>操作记录</div>

									</div>

									<div class="portlet-body">

										<table class="table table-hover">

											<thead>

												<tr>

													<th>No.</th>

													<th>操作者</th>

													<th>操作内容</th>

													<th>操作时间</th>

												</tr>

											</thead>

											<tbody id="operate_tbody">

											</tbody>

										</table>

									</div>

								</div>

							</div>

							<!-- Log Table -->

							<div class="span5">

								<div class="portlet box light-grey">

									<div class="portlet-title">

										<div class="caption"><i class="icon-user"></i>登录记录</div>

									</div>

									<div class="portlet-body">

										<table class="table table-hover">

											<thead>

												<tr>

													<th>No.</th>

													<th>用户名</th>

													<th>登录时间</th>

												</tr>

											</thead>

											<tbody id="login_tbody">

											</tbody>

										</table>

									</div>

								</div>

							</div>

						</div>

					</div>

				</div>

				<!-- END PAGE CONTENT-->

			</div>

			<!-- END PAGE CONTAINER--> 

		</div>

		<!-- END PAGE -->    

	</div>

	<!-- END CONTAINER -->

	<!-- BEGIN FOOTER -->

	<div class="footer">

		<div class="footer-inner">

			2015 &copy; TopV.

		</div>

		<div class="footer-tools">

			<span class="go-top">

			<i class="icon-angle-up"></i>

			</span>

		</div>

	</div>

	<!-- END FOOTER -->

	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->

	<!-- BEGIN CORE PLUGINS -->

	<script src="media/js/jquery-1.10.1.min.js" type="text/javascript"></script>

	<script src="media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>

	<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->

	<script src="media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>      

	<script src="media/js/bootstrap.min.js" type="text/javascript"></script>

	<!--[if lt IE 9]>

	<script src="media/js/excanvas.min.js"></script>

	<script src="media/js/respond.min.js"></script>  

	<![endif]-->   

	<script src="media/js/jquery.slimscroll.min.js" type="text/javascript"></script>

	<script src="media/js/jquery.blockui.min.js" type="text/javascript"></script>  

	<script src="media/js/jquery.cookie.min.js" type="text/javascript"></script>

	<script src="media/js/jquery.uniform.min.js" type="text/javascript" ></script>

	<!-- END CORE PLUGINS -->

	<script type="text/javascript" src="media/js/echarts-all.js"></script>
	
	<script src="media/js/json2.js"></script>

	<script src="media/js/app.js"></script>  

	<!-- BEGIN backbone js include -->
	<script src="media/js/underscore.js"></script>

	<script src="media/js/backbone.js"></script>
	
	<script src="media/js/clusterinfo.js"></script>
	
	<script src="media/js/cluster.js"></script>
	
	<script src="media/js/clustercharts.js"></script>
	<!-- END backbone js include -->  

	<script type="text/tempalte" id="size_template">

		<div class="bar" style="width: <%=percent%>%;"></div>

		<span> <%=used%> G / <%=total%> G</span>

	</script>  

	<script type="text/template" id="login_template">

		<tr>

			<td><%=id%></td>

			<td><%=name%></td>

			<td><%=time%></td>

		</tr>

	</script>

	<script type="text/template" id="operate_template">

		<tr>

			<td><%=id%></td>

			<td><%=name%></td>

			<td><%=operation%></td>

			<td><%=time%></td>

		</tr>

	</script>

	<script type="text/template" id="osd_table_template">

		<tr>

			<td >node<%=id%></td>

			<td class="<%=slot1%>"><a href="#">&nbsp;</a></td>

			<td class="<%=slot2%>"><a href="#">&nbsp;</a></td>

			<td class="<%=slot3%>"><a href="#">&nbsp;</a></td>

			<td class="<%=slot4%>"><a href="#">&nbsp;</a></td>

			<td class="<%=slot5%>"><a href="#">&nbsp;</a></td>

			<td class=""><a href="#">&nbsp;</a></td>

			<td class=""><a href="#">&nbsp;</a></td>

			<td class=""><a href="#">&nbsp;</a></td>

		</tr>

	</script>

	<script type="text/template" id="charts_template">

		<div>

			<span>iops信息:<span><%=iops%></span></span>

		</div>

		<div class="wrapper">

			<div id="gauge1" class="gaugetable"></div>

		</div>

		<div>

			<span>读速率:<span><%=read%></span>MB/s</span>

		</div>

		<div class="wrapper" style="background-color: #eee">

			<div id="gauge2" class="gaugetable"></div>

		</div>

		<div>

			<span>写速率:<span><%=write%></span>MB/s</span>

		</div>

		<div class="wrapper" style="background-color: #eee">

			<div id="gauge3" class="gaugetable"></div>

		</div>

		<script type="text/javascript">
		var iops = [];
		var read = [];
		var write = [];
		var stamp = [];
        var myChart1 = echarts.init(document.getElementById('gauge1'));
        var myChart2 = echarts.init(document.getElementById('gauge2'));
        var myChart3 = echarts.init(document.getElementById('gauge3'));

	    myChart1.showLoading({  
	        text : "Loading IOPS...",
	        effect : "bubble",
	        textStyle : {
	            fontSize : 20,
	            fontWeight : "bolder"
	        }
	    });
	    myChart2.showLoading({  
	        text : "Loading Read Rate...",
	        effect : "bubble",
	        textStyle : {
	            fontSize : 20,
	            fontWeight : "bolder"
	        }
	    });
	    myChart3.showLoading({  
	        text : "Loading Write Rate...",
	        effect : "bubble",
	        textStyle : {
	            fontSize : 20,
	            fontWeight : "bolder"
	        }
	    });
	    $.ajax({
	        type : "get", //rest请求方式
	        async : false, //同步执行
	        url : "http://192.168.50.90:8000/storstatus/?cmd=iodd",//
	        data : {},
	        dataType : "json", //返回数据形式为json
	        success : function(result) {
	        	//console.log(result);
	        if (result) {
	            //var jn = JSON.parse(result);
	            	iops = result.info.iops;
	            	read = result.info.rdrt;
	            	write = result.info.wrrt;
	            	stamp = result.info.time;
	            }
	        },
	        error : function(errorMsg) {
	            //alert("error!");
	            myChart1.hideLoading();
	        }
	    });
	        //iops charts
	        var option1 = {
			    dataZoom: {
			        show: true,
			        start : 70,
			        height : 10,
			    },
			    grid: {
			    	x: '8%',
			    	y: '10%',
			    	x2: '5%',
			    	y2: '0%',
			    	height: '60%'
			    },
			    xAxis : [
			        {
			            type : 'time',
			            splitNumber:7
			        }
			    ],
			    yAxis : [
			        {
			            type : 'value'
			        }
			    ],
			    series : [
			        {
			            name: 'series1',
			            type: 'line',
			            data: (function () {
			                var d = [];
			                var len = 0;
			                var now = new Date();
			                var value;
			                while (len++ < 30) {
			                    d.push([
			                       	new Date(stamp[len]),
			                        iops[len] - 0
			                    ]);
			                }
			                return d;
			            })()
			        }
			    ]
			};

			// read rate charts
			var option2 = {
			    dataZoom: {
			        show: true,
			        start : 70,
			        height : 10,
			    },
			    grid: {
			    	x: '8%',
			    	y: '10%',
			    	x2: '5%',
			    	y2: '0%',
			    	height: '60%'
			    },
			    xAxis : [
			        {
			            type : 'time',
			            splitNumber:7
			        }
			    ],
			    yAxis : [
			        {
			            type : 'value'
			        }
			    ],
			    series : [
			        {
			            name: 'series1',
			            type: 'line',
			            data: (function () {
			                var d = [];
			                var len = 0;
			                var now = new Date();
			                var value;
			                while (len++ < 30) {
			                    d.push([
			                       	new Date(stamp[len]),
			                        read[len] - 0
			                    ]);
			                }
			                return d;
			            })()
			        }
			    ]
			};
			  
			// write rate charts
			var option3 = {
			    dataZoom: {
			        show: true,
			        start : 70,
			        height : 10,
			    },
			    grid: {
			    	x: '8%',
			    	y: '10%',
			    	x2: '5%',
			    	y2: '0%',
			    	height: '60%'
			    },
			    xAxis : [
			        {
			            type : 'time',
			            splitNumber:7
			        }
			    ],
			    yAxis : [
			        {
			            type : 'value'
			        }
			    ],
			    series : [
			        {
			            name: 'series1',
			            type: 'line',
			            data: (function () {
			                var d = [];
			                var len = 0;
			                var now = new Date();
			                var value;
			                while (len++ < 30) {
			                    d.push([
			                       	new Date(stamp[len]),
			                        write[len] - 0
			                    ]);
			                }
			                return d;
			            })()
			        }
			    ]
			};          
	    var loadingTicket = setTimeout(function (){
	        myChart1.hideLoading();
	        myChart2.hideLoading();
	        myChart3.hideLoading();
	        myChart1.setOption(option1);
	        myChart2.setOption(option2);
	        myChart3.setOption(option3);
	        
	    },1000);
	    var refreshChart = setInterval(function(){
		$.ajax({
	        type : "get", //rest请求方式
	        async : false, //同步执行
	        url : "http://192.168.50.90:8000/storstatus/?cmd=iodd",//
	        data : {},
	        dataType : "json", //返回数据形式为json
	        success : function(result) {
	        	//console.log(result);
	        if (result) {
	            //var jn = JSON.parse(result);
	            	iops = result.info.iops;
	            	read = result.info.rdrt;
	            	write = result.info.wrrt;
	            	stamp = result.info.time;
	            }
	        },
	        error : function(errorMsg) {
	            //alert("error!");
	            myChart1.hideLoading();
	        }
	    });
	        //iops charts
	        var option1 = {
			    dataZoom: {
			        show: true,
			        start : 70,
			        height : 10,
			    },
			    grid: {
			    	x: '8%',
			    	y: '10%',
			    	x2: '5%',
			    	y2: '0%',
			    	height: '60%'
			    },
			    xAxis : [
			        {
			            type : 'time',
			            splitNumber:7
			        }
			    ],
			    yAxis : [
			        {
			            type : 'value'
			        }
			    ],
			    series : [
			        {
			            name: 'series1',
			            type: 'line',
			            data: (function () {
			                var d = [];
			                var len = 0;
			                var now = new Date();
			                var value;
			                while (len++ < 30) {
			                    d.push([
			                       	new Date(stamp[len]),
			                        iops[len] - 0
			                    ]);
			                }
			                return d;
			            })()
			        }
			    ]
			};

			// read rate charts
			var option2 = {
			    dataZoom: {
			        show: true,
			        start : 70,
			        height : 10,
			    },
			    grid: {
			    	x: '8%',
			    	y: '10%',
			    	x2: '5%',
			    	y2: '0%',
			    	height: '60%'
			    },
			    xAxis : [
			        {
			            type : 'time',
			            splitNumber:7
			        }
			    ],
			    yAxis : [
			        {
			            type : 'value'
			        }
			    ],
			    series : [
			        {
			            name: 'series1',
			            type: 'line',
			            data: (function () {
			                var d = [];
			                var len = 0;
			                var now = new Date();
			                var value;
			                while (len++ < 30) {
			                    d.push([
			                       	new Date(stamp[len]),
			                        read[len] - 0
			                    ]);
			                }
			                return d;
			            })()
			        }
			    ]
			};
			  
			// write rate charts
			var option3 = {
			    dataZoom: {
			        show: true,
			        start : 70,
			        height : 10,
			    },
			    grid: {
			    	x: '8%',
			    	y: '10%',
			    	x2: '5%',
			    	y2: '0%',
			    	height: '60%'
			    },
			    xAxis : [
			        {
			            type : 'time',
			            splitNumber:7
			        }
			    ],
			    yAxis : [
			        {
			            type : 'value'
			        }
			    ],
			    series : [
			        {
			            name: 'series1',
			            type: 'line',
			            data: (function () {
			                var d = [];
			                var len = 0;
			                var now = new Date();
			                var value;
			                while (len++ < 30) {
			                    d.push([
			                       	new Date(stamp[len]),
			                        write[len] - 0
			                    ]);
			                }
			                return d;
			            })()
			        }
			    ]
			};             
	          
	        myChart1.clear();  
	        myChart2.clear();
	        myChart3.clear();       
	        myChart1.setOption(option1);
	        myChart2.setOption(option2);
	        myChart3.setOption(option3);
	    },5000)
        </script>
	</script>

	<script>

		jQuery(document).ready(function() {    

		   App.init();

		});

	</script>

	<script type="text/javascript">

  	</script>

	<!-- END JAVASCRIPTS -->

<script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-37564768-1']);  _gaq.push(['_setDomainName', 'keenthemes.com']);  _gaq.push(['_setAllowLinker', true]);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script></body>

<!-- END BODY -->

</html>
